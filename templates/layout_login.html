<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReviewHub</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles-agel.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style_mobile.css') }}">

    <script src="/reviewhub/static/js.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
</head>
<body>

    <!-- Horní lišta -->
    <header {% if session['ModeApp'] == 'test' %} class="top-bar-test" {% else %} class="top-bar" {%endif%}>
        <div class="top-bar-left">
            <div class="web_name">ScienceBase {% if session['ModeApp'] == 'test' %} test {% endif %}</div>
            <div class="project_name">{{ session['selected_project_name'] }}</div> <!-- Zde bude název projektu -->
        </div>
        <div class="top-bar-right">

            {% if 'user_id' in session %}
                <span>{{ session['user_name'] }} {{ session['user_surname'] }} ({{ session['user_role'] }})</span>
                <a href="{{ url_for('auth.logout') }}">Odhlásit</a>
            {% else %}
                <a href="{{ url_for('auth.login') }}">LOGIN</a>
            {% endif %}
            

        </div>
    </header>


        
        

        <!-- Hlavní obsah -->
        <main class="m_content">
            
               {% block content %}{% endblock %}
            
        </main>
   
</body>

<script>
  function toggleSidebar(){
    const b=document.body, btn=document.getElementById('sidebarToggle');
    b.classList.toggle('sidebar-collapsed');
    const collapsed=b.classList.contains('sidebar-collapsed');
    btn.querySelector('.chev').textContent = collapsed ? '»' : '«';
    btn.setAttribute('aria-label', collapsed ? 'Zobrazit menu' : 'Skrýt menu');
    btn.title = collapsed ? 'Zobrazit menu' : 'Skrýt menu';
    localStorage.setItem('sidebar_collapsed', collapsed ? '1' : '0');
  }
  document.addEventListener('DOMContentLoaded',()=>{
    const btn=document.getElementById('sidebarToggle');
    if(localStorage.getItem('sidebar_collapsed')==='1'){
      document.body.classList.add('sidebar-collapsed');
      if(btn) btn.querySelector('.chev').textContent='»';
    }
  });
</script>


</html>

